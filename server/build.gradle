version rootProject.version

apply plugin: 'java'
apply plugin: 'application'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

mainClassName = 'server.system.monitor.server.Main'

jar {
    manifest {
        attributes 'Title': 'ServerSystemMonitor.Server', 'Version': version, 'Main-Class': mainClassName
    }
    archiveName "ServerSystemMonitor.Server.jar"
    dependsOn configurations.runtime
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

distZip {
    into(project.name + "-" + version) {
        from '.'
        include 'lib/*.so', 'lib/*.dll', 'lib/*.lib', 'lib/*.sl'
    }
}

dependencies {
    compile project(":common")
    compile fileTree(dir: 'lib', include: ['*.jar'])
    compile group: 'commons-cli', name: 'commons-cli', version: '1.2'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}
